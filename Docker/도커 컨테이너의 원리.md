# 도커 컨테이너의 원리
## 도커 이미지와 컨테이너
도커 이미지 -> 컨테이너 실행에 필요한 파일과 설정값등을 포함하고 있다.
도커 이미지는 레이어로 구성되는데 이미지를 컨테이너로 만들면 레이어는 차례차례 쌓이며, 마지막으로 컨테이너 레이어가 추가되면서 컨테이너로 동작한다. 컨테이너로 동작하기 시작하면 사용자의 모든 행동은 컨테이너 레이어에서 이루어지며 환경을 구성하는 이미지 레이어를 변경하는 것은 불가능하다. 이미지 레이어는 컨테이너가 종료되어도 사라지지 않고, 컨테이너를 종료하면 컨테이너 레이어만 사라진다.
도커 컨테이너 -> 도커 이미지와 연결시켜 정의한다면, 도커 컨테이너는 도커 이미지가 실행된 형태.
도커 컨테이너는 리눅스의 컨테이너(LXC)를 활용한 기술로, 컴퓨터에 독립적인 컴퓨팅 공간을 만들어낸다. VM은 환경(OS)자체를 가상화 하지만, 도커 컨테이너는 호스트 OS의 커널을 공유하며 단순히 격리되어 있는 하나의 프로세스로써 동작한다.

## 도커 컨테이너의 원리
도커는 컨테이너라는 가상의 격리환경을 만들기 위해 리눅스의 namespace와 cgroup이라는 기능을 사용한다.(namespace와 cgroup으로 만들어진 컨테이너가 LXC)
namespace - 프로세스를 독립시켜주는 가상화 기술. 컨테이너에서 실행된 프로세스가 시스템(user, 네트워크, 파일, 프로세스 등)에 대해 독립할 수 있게 해준다. 
프로세스 별로 리소스 사용을 분리. 하드웨어 리소스 자체를 가상화 하는 것이 아니라 리눅스 내의 자원을 가상화 한다.

cgroup - 자원(CPU, 메모리 등)에 대한 제어를 가능하게 해주는 리눅스 커널의 기능.
Control Gcroups의 약자. 프로세스들이 사용할 수 있는 컴퓨팅 자원(메모리, CPU, 네트워크, 디바이스, I/O)들을 제한하고 격리시킬 수 있다.

도커는 프로세스를 격리하고, 프로세스에 필요한 컴퓨팅 자원을 독립적으로 할당/격리하여 격리된 가상환경을 구축한다.
