# 멱등성이란?
어떤 대상에 같은 연산을 여러번 해도 결과가 달라지지 않는 성질을 말한다.   
동일한 요청을 한 번 보내는 것과 여러 번 연속으로 보내는 것이 같은 효과를 지니고, 서버의 상태도 동일하게 남을 때 멱등성을 가졌다 한다.    
올바르게 구현한 경우 <b>GET</b>, <b>HEAD</b>, <b>PUT</b>, <b>DELETE</b> 메서드는 멱등성을 가진다.
___
## 멱등성을 보장하는 메서드
### 멱등성을 따질 땐 실제 서버의 백엔드 상태만 보면 되며 각 요청에서 반환하는 응답 코드는 다를 수 있다.   

#### GET 메서드
* GET은 단지 리소스를 읽어오기에 여러번 수행해도 결과가 변하지 않는다.

#### PUT 메서드
* PUT은 요청에 담긴 리소스로 기존 리소스를 대체하기 때문에 결과가 변하지 않는다. 대체한 리소스로 결과가 나온다.

#### DELETE 메서드
* DELETE는 요청을 여러번 보내면 첫번째는 status 200을, 이후로는 status 404을 반환할 것이다. 하지만 예상되는 결과는 삭제된 채로 동일하다.

___
## 멱등성을 보장하지 않는 메서드

#### POST 메서드
* POST는 리소스를 새롭게 생성하기에 여러번 수행하면 매번 새로운 리소스가 생성된다. 따라서 연산수행 결과가 매번 달라진다.

#### PATCH 메서드
* PATCH는 리소스를 대체하지 않기에 제한이 따로 없다. 따라서 구현방법에 따라 멱등성 보장 여부가 다르다. 

## 어떤 경우에 PATCH는 멱등성을 보장하지 않는가?
 * 특정 값으로만 바꾼다면 멱등성이 보장된다.
```javascript
PATCH users/1
{
    'age': 20   //1수행: 20, 2수행: 20, ...동일
}
```

* <b>만약 patch 메서드에 해당하는 값을 +1 하라는 데이터가 들어가 있다면 그 메서드는 수행될때마다 결과가 달라진다.</b>
```javascript
PATCH users/1
{
    $increase: 'age',
    value: 1,   //1수행: 21, 2수행: 22, ...동일하지 않다
}
```
