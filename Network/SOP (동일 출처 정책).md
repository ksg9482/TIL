# 동일 출처 정책

동일 출처 정책(same-origin policy)은 어떤 출처에서 불러온 문서나 스크립트가 다른 출처에서 가져온 리소스와 상호작용하는 것을 제한하는 보안 방식이다. 동일 출처 정책은 잠재적으로 해로울 수 있는 문서를 분리함으로써 공격받을 수 있는 경로를 줄여준다.

동일 출처란 비교 대상이 되는 두 URL의 프로토콜, 포트(기본적으로 정해진 포트가 있기 때문에 생략되지만 포트까지 명시한 경우), 호스트가 모두 같은 경우 출처가 동일하다. 경로가 다른 것은 상관 없다. 

같은 호스트에 속해있는 문서나 스크립트만 서로 상호작용 할 수 있도록 제한하기 때문에, 웹 애플리케이션은 자신의 출처와 동일한 리소스만 불러올 수 있으며, 다른 출처의 리소스를 불러오려면 그 출처에서 올바른 CORS 헤더를 포함한 응답을 반환해야 한다.

동일 출처 원칙의 적용범위는 다음과 같다.

1. 동일 출처 원칙은 오직 스크립트 에만 적용된다. 이는 다른 웹스크립트에도 적용되어 있으며, DOM 제어와는 관련 없는 XMLHttpRequest 에도 적용되어 있다.

2. 동일 출처 원칙은 Html 문서 안에 포함된 image, css, 동적으로 로드된 스크립트 에는 적용되지 않는다.(CSRF(Cross-site_request_forgery) 공격은 이러한 점을 이용한 공격이다.)

동일 출처 정책에 의한 불편을 해소하기 위해 등장한 것이 CORS다.

## 왜 SOP와 CORS를 사용하는가?

다른 출처의 어플리케이션이 서로 통신하는 것에 대해 아무런 제약도 존재하지 않는다면, 악의를 가진 사용자가 CSRF(Cross-Site Request Forgery), XSS(Cross-Site Scripting)와 같은 방법을 사용하여 어플리케이션에서 코드가 실행된 것처럼 꾸며서 악의적인 동작을 하기 쉽다. 상호작용을 동일 출처로 제한하고 예외가 있다면 정해진 응답, 요청을 하게 하도록 하는 것은 리소스가 안전하다는 최소한의 보장을 해주는 것이다.